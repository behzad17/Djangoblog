<!-- Events Grid Layout - One Event Per Row, Centered -->
{% load static %}
<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-10 col-md-12">
      {% if post_list %}
        {% for post in post_list %}
        <div class="event-card-row mb-4">
          <div class="row g-0">
            <!-- Event Image -->
            <div class="col-md-4 event-card-image-wrapper">
              {% if post.featured_image %}
                {% if "placeholder" in post.featured_image.url|default:"" %}
                <img
                  src="{% static 'images/default.jpg' %}"
                  alt="{{ post.title }}"
                  class="event-card-image"
                />
                {% else %}
                <img
                  src="{{ post.featured_image.url }}"
                  alt="{{ post.title }}"
                  class="event-card-image"
                  onerror="this.onerror=null; this.src='{% static 'images/default.jpg' %}';"
                />
                {% endif %}
              {% else %}
              <img
                src="{% static 'images/default.jpg' %}"
                alt="{{ post.title }}"
                class="event-card-image"
              />
              {% endif %}
            </div>
            
            <!-- Event Content -->
            <div class="{% if post.event_start_date %}col-md-6{% else %}col-md-8{% endif %} event-card-content-wrapper">
              <div class="event-card-content">
                {% if post.slug %}
                <a href="{% url 'post_detail' post.slug %}" class="event-card-title-link">
                  <h2 class="event-card-title">{{ post.title }}</h2>
                </a>
                {% else %}
                <h2 class="event-card-title">{{ post.title }}</h2>
                {% endif %}
                
                <p class="event-card-description">
                  {% if post.excerpt %}
                    {{ post.excerpt|striptags|truncatewords:20 }}
                  {% else %}
                    {{ post.content|striptags|truncatewords:20 }}
                  {% endif %}
                </p>
              </div>
              {% if post.event_start_date %}
              <div class="event-content-separator"></div>
              {% endif %}
            </div>
            
            <!-- Event Date Section (Separate, Right Side) -->
            {% if post.event_start_date %}
            <div class="col-md-2 event-card-date-wrapper">
              <div class="event-card-date-section">
                <div class="event-date-month">{{ post.event_start_date|date:"M" }}</div>
                <div class="event-date-day">{{ post.event_start_date|date:"d" }}</div>
                <div class="event-date-year">{{ post.event_start_date|date:"Y" }}</div>
                {% if post.event_end_date and post.event_end_date != post.event_start_date %}
                <div class="event-date-separator">-</div>
                <div class="event-date-month">{{ post.event_end_date|date:"M" }}</div>
                <div class="event-date-day">{{ post.event_end_date|date:"d" }}</div>
                <div class="event-date-year">{{ post.event_end_date|date:"Y" }}</div>
                {% endif %}
              </div>
            </div>
            {% endif %}
          </div>
        </div>
        {% endfor %}
      {% else %}
      <div class="row">
        <div class="col-12">
          <div class="alert alert-info text-center" role="alert">
            <i class="fas fa-info-circle me-2"></i>
            No posts found in this category yet. 
            <a href="{% url 'create_post' %}" class="alert-link">Create the first post!</a>
          </div>
        </div>
      </div>
      {% endif %}
      
      {% if is_paginated %}
      <div class="pagination-container mt-4">
        <nav aria-label="Page navigation">
          <ul class="pagination justify-content-center">
            {% if page_obj.has_previous %}
            <li class="page-item">
              <a href="?page={{ page_obj.previous_page_number }}" class="page-link"
                ><i class="fas fa-chevron-left"></i> Previous</a
              >
            </li>
            {% endif %}
            
            {% if page_obj.has_next %}
            <li class="page-item">
              <a href="?page={{ page_obj.next_page_number }}" class="page-link"
                >Next <i class="fas fa-chevron-right"></i></a
              >
            </li>
            {% endif %}
          </ul>
        </nav>
      </div>
      {% endif %}
    </div>
  </div>
</div>

