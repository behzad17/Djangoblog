{% extends "base.html" %}
{% load static %}
{% block content %}
<!-- Hero Section -->
<section
  class="hero-section text-white mb-4"
  style="
    background: #00A693;
    padding: 1.5rem 0;
  "
>
  <div class="container">
    <div class="row justify-content-center text-center">
      <div class="col-lg-8">
        <h1 class="hero-title mb-2" style="font-size: 1.75rem;">
          {{ ad.title }}
        </h1>
        <p class="hero-subtitle mb-0" style="font-size: 0.95rem;">
          دسته‌بندی: {{ ad.category.name }}
        </p>
      </div>
    </div>
  </div>
</section>

<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm border-0 {% if ad.is_currently_featured %}ad-featured{% endif %}">
        <div class="card-body text-center p-4 position-relative">
          {% if ad.is_currently_featured %}
          <span class="glass-card-badge glass-card-badge-featured" style="position: absolute; top: 15px; right: 15px;">
            <i class="fas fa-star ms-1"></i>ویژه
          </span>
          {% endif %}
          {% if ad.image %}
            {% if ad.target_url and ad.url_approved %}
            <a
              href="{{ ad.target_url }}"
              target="_blank"
              rel="noopener noreferrer"
              class="ad-image-link"
            >
              <img
                src="{{ ad.image.url }}"
                alt="{{ ad.title }}"
                class="img-fluid ad-detail-image"
                onerror="this.onerror=null; this.src='{% static 'images/default.jpg' %}';"
              />
            </a>
            {% else %}
            <img
              src="{{ ad.image.url }}"
              alt="{{ ad.title }}"
              class="img-fluid ad-detail-image"
              onerror="this.onerror=null; this.src='{% static 'images/default.jpg' %}';"
            />
            {% endif %}
          {% else %}
          <img
            src="{% static 'images/default.jpg' %}"
            alt="{{ ad.title }}"
            class="img-fluid ad-detail-image"
          />
          {% endif %}
          
          {% if ad.target_url and ad.url_approved %}
          <div class="mt-4">
            <a
              href="{{ ad.target_url }}"
              target="_blank"
              rel="noopener noreferrer"
              class="btn btn-primary btn-lg ad-visit-btn"
            >
              <i class="fas fa-external-link-alt ms-2"></i>برای بازدید اینجا را کلیک کنید
            </a>
            <p class="text-muted small mt-2 mb-0">{{ ad.target_url }}</p>
          </div>
          {% endif %}
        </div>
      </div>
      <div class="mt-4 text-center">
        <a 
          href="{% url 'ads:ads_by_category' ad.category.slug %}"
          class="btn btn-outline-secondary"
        >
          <i class="fas fa-arrow-right ms-2"></i>بازگشت به راهنما {{ ad.category.name }}
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock content %}
