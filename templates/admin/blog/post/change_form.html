{% extends "admin/change_form.html" %}
{% load static %}

{% block extrastyle %}
{{ block.super }}
<!-- Fix jQuery alias for Summernote - must load before Summernote scripts -->
<script>
    // Immediately define $ and jQuery as aliases for django.jQuery
    // This fixes "$ is not a function" errors in admin panel
    // Must run synchronously before any async scripts load
    (function() {
        function setupAlias() {
            if (typeof django !== 'undefined' && django.jQuery) {
                window.$ = window.jQuery = django.jQuery;
                return true;
            }
            return false;
        }
        
        // Try immediately
        if (!setupAlias()) {
            // If django.jQuery not ready, poll until it is
            var attempts = 0;
            var interval = setInterval(function() {
                if (setupAlias() || attempts++ > 50) {
                    clearInterval(interval);
                }
            }, 10);
        }
    })();
</script>
{% endblock %}

{% block extrahead %}
{{ block.super }}
<!-- Ensure jQuery alias is available after all scripts load -->
<script>
    // Re-define after page load to handle async script loading
    if (typeof django !== 'undefined' && django.jQuery) {
        window.$ = window.jQuery = django.jQuery;
    }
</script>
{% endblock %}

