{% extends "admin/change_form.html" %}
{% load static %}

{% block extrastyle %}
{{ block.super }}
<!-- Simple jQuery alias: Wait for django.jQuery, then set $ and jQuery -->
<script type="text/javascript">
// Wait for django.jQuery to be available, then set aliases
// This must run BEFORE any Summernote scripts load
(function() {
    'use strict';
    
    function setupJQueryAlias() {
        if (typeof django !== 'undefined' && typeof django.jQuery !== 'undefined') {
            // Set $ and jQuery as aliases for django.jQuery
            // Only set if not already set to avoid conflicts
            if (typeof window.$ === 'undefined') {
                window.$ = django.jQuery;
            }
            if (typeof window.jQuery === 'undefined') {
                window.jQuery = django.jQuery;
            }
            return true;
        }
        return false;
    }
    
    // Try immediately
    if (!setupJQueryAlias()) {
        // Poll until django.jQuery is available
        var attempts = 0;
        var maxAttempts = 300; // 3 seconds
        var pollInterval = setInterval(function() {
            if (setupJQueryAlias() || attempts++ >= maxAttempts) {
                clearInterval(pollInterval);
            }
        }, 10);
    }
})();
</script>
{% endblock %}

